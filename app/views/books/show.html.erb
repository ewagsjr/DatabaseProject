<p id="notice"><%= notice %></p>

<div class="row">
  <div class="col-md-8 col-md-offset-3" style="border: 2px dashed rgba(27,31,35,0.3); border-radius: 5px; padding: 30px; width: 648.33px;">
    <h3>
      <strong>ISBN:</strong>
      <%= @book.isbn %>
    </h3>

    <h3>
      <strong>Title:</strong>
      <%= @book.title %>
    </h3>

    <h3>
      <strong>Author:</strong>
      <%= @book.author.fName %> <%= @book.author.lName %>
    </h3>

    <h3>
      <strong>Pages:</strong>
      <%= @book.pages %>
    </h3>

    <h3>
      <strong>Publisher:</strong>
      <%= @book.publisher %>
    </h3>

    <h3>
      <strong>Copies Available:</strong>
      <%= @book.copiesLeft %>
    </h3>

    <h3>
      <strong>Category:</strong>
      <%= @book.category.name %>
    </h3>

    <% if (signed_in?) && (current_user.isAdmin?) -%>
      <%= link_to 'Edit', edit_book_path(@book) %> |
      <%= link_to 'Back', books_path %>
    <% else -%>
    <% if @book.copiesLeft > 0 %>
      <%= form_for(@order_item, remote: true) do |f| %>
      <%= f.hidden_field :book_id, value: @book.id %>
      <%= f.hidden_field :quantity, value: 1, min: 1 %>
      <input type="submit" value="Rent" class="btn btn-primary" onclick="event.preventDefault(); checkSignIn();">
      <% end %>
    <% end %>
    <% end -%>
  </div>
</div>

<script type="text/javascript">
  function checkSignIn() {
    var signed_in = <%= signed_in? %>;

    if (signed_in)
      document.forms['rent'].submit();
    else {
      alert("Sign in or register to rent a book.");
      return false;
    }

  }
</script>
